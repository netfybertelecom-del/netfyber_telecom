services:
  - type: web
    name: netfyber-telecom
    runtime: python
    region: ohio  # ou sao-paulo
    plan: free
    autoDeploy: true
    buildCommand: "./build.sh"
    startCommand: "gunicorn app:app"
    envVars:
      - key: FLASK_ENV
        value: production
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: SECRET_KEY
        generateValue: true
      - key: ADMIN_USERNAME
        sync: false
      - key: ADMIN_PASSWORD
        sync: false
      - key: ADMIN_EMAIL
        value: admin@netfyber.com
      - key: ADMIN_URL_PREFIX
        value: /gestao-exclusiva-netfyber
      # Cloudflare R2 (opcional)
      - key: S3_ENABLED
        value: false
      - key: S3_ENDPOINT_URL
        sync: false
      - key: S3_ACCESS_KEY_ID
        sync: false
      - key: S3_SECRET_ACCESS_KEY
        sync: false
      - key: S3_BUCKET
        sync: false
      - key: S3_REGION
        value: auto

databases:
  - name: netfyber_db
    plan: free
    databaseName: netfyber
    user: netfyber_user